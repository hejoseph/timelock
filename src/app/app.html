<div class="app-container">
  <header class="app-header">
    <div class="header-content">
      <h1 class="app-title">
        <span class="title-icon">&#x2728;</span>
        TaskFlow Pro
        <span class="title-subtitle">Professional Task Management</span>
      </h1>
    </div>
  </header>

  <main class="app-main">
    <div class="todo-container">
      <!-- Add Todo Form -->
      <app-todo-form #todoForm (addTodo)="onAddTodo($event)"></app-todo-form>

      <!-- Filters and Stats -->
      <app-todo-filters
        [currentFilter]="filter()"
        [currentSort]="sort()"
        [searchTerm]="search()"
        [stats]="stats()"
        (filterChange)="onFilterChange($event)"
        (sortChange)="onSortChange($event)"
        (searchChange)="onSearchChange($event)"
        (clearCompleted)="onClearCompleted()">
      </app-todo-filters>

      <!-- Todo List -->
      <div class="todos-section">
        <div class="todos-list" *ngIf="todos().length > 0; else emptyState">
          <app-todo-item
            *ngFor="let todo of todos(); trackBy: trackByTodoId"
            [todo]="todo"
            (toggle)="onToggleTodo($event)"
            (update)="onUpdateTodo($event)"
            (delete)="onDeleteTodo($event)"
            (addSubtaskEvent)="onAddSubtask($event)"
            (toggleExpanded)="onToggleExpanded($event)">
          </app-todo-item>
          
          <!-- Add Task Button at bottom of list -->
          <div class="add-task-bottom">
            <button class="add-task-bottom-btn" (click)="onShowAddTaskForm()">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 1a.75.75 0 01.75.75v5.5h5.5a.75.75 0 010 1.5h-5.5v5.5a.75.75 0 01-1.5 0v-5.5h-5.5a.75.75 0 010-1.5h5.5v-5.5A.75.75 0 018 1z"/>
              </svg>
              Add Task
            </button>
          </div>
        </div>

        <ng-template #emptyState>
          <div class="empty-state">
            <div class="empty-icon">
              @if (search()) {
                &#x1F50D;
              } @else if (filter() === 'completed') {
                &#x1F389;
              } @else {
                &#x1F4DD;
              }
            </div>
            <h3 class="empty-title">
              @if (search()) {
                No todos found
              } @else if (filter() === 'completed') {
                No completed todos
              } @else if (filter() === 'active') {
                No active todos
              } @else {
                No todos yet
              }
            </h3>
            <p class="empty-description">
              @if (search()) {
                Try adjusting your search terms or filters
              } @else if (filter() === 'completed') {
                Complete some todos to see them here
              } @else if (filter() === 'active') {
                All your todos are completed! &#x1F389;
              } @else {
                Add your first todo to get started
              }
            </p>
          </div>
        </ng-template>
      </div>
    </div>
  </main>

  <footer class="app-footer">
    <p>Made with &#x2764;&#xFE0F; using Angular</p>
  </footer>
</div>